\def\MonthTickLabels{2024-01,2024-02,2024-03,2024-04,2024-05,2024-06,2024-07,2024-08,2024-09,2024-10,2024-11,2024-12,2025-01,2025-02,2025-03,2025-04,2025-05,2025-06,2025-07,2025-08,2025-09,2025-10,2025-11,2025-12}

\pgfplotstableread[col sep=comma]{../../results/kaq5.csv}\kaqfivedata

\begin{figure}[H]
\centering
\begin{tikzpicture}
\begin{axis}[
    width=\textwidth,
    height=8cm,
    ybar stacked,
    bar width=12pt,
    ymin=0,
    ymax=1,
    ylabel={Proportion of events},
    xtick={0,...,23},
    xticklabels={\MonthTickLabels},
    xticklabel style={rotate=45, anchor=east},
    legend style={at={(0.02,0.98)}, anchor=north west, cells={anchor=west}},
    grid=both,
    major grid style={gray!30},
    minor grid style={gray!15},
]
    \addplot+[fill=blue!55]
        table[
            x expr=\coordindex,
            y=proportion,
            row predicate/.code={
                \pgfplotstablegetelem{\pgfplotstablerow}{work_mode}\of{\kaqfivedata}
                \edef\mode{\pgfplotsretval}
                \ifnum\pdfstrcmp{\mode}{collaborative}=0
                \else
                    \pgfplotstableuserowfalse
                \fi
            }
        ] {\kaqfivedata};
    \addlegendentry{Collaborative}

    \addplot+[fill=orange!70]
        table[
            x expr=\coordindex,
            y=proportion,
            row predicate/.code={
                \pgfplotstablegetelem{\pgfplotstablerow}{work_mode}\of{\kaqfivedata}
                \edef\mode{\pgfplotsretval}
                \ifnum\pdfstrcmp{\mode}{individual}=0
                \else
                    \pgfplotstableuserowfalse
                \fi
            }
        ] {\kaqfivedata};
    \addlegendentry{Individual}
\end{axis}
\end{tikzpicture}
\caption{Collaboration vs individual work share over time (kaq5).}
\label{fig:kaq5}
\end{figure}
